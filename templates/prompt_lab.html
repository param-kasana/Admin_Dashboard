{% extends "layout.html" %}
{% block title %}Prompt Lab{% endblock %}
{% block content %}
<div style="display: flex; justify-content: flex-end; align-items: center; margin-bottom: 10px;">
  <label class="switch">
    <input type="checkbox" id="aiToggle">
    <span class="slider round"></span>
  </label>
  <span id="aiToggleLabel" style="margin-left: 8px; font-size: 14px;"></span>
</div>

<h1>Prompt Studio</h1>

<link rel="stylesheet" href="{{ url_for('static', filename='prompt_lab/prompt_lab.css') }}">

<div class="prompt-form">

  <!-- Quiz Selector -->
  <label for="quizSelect" style="text-align: left; font-family: Arial, sans-serif;">Select Quiz:</label>
  <select id="quizSelect" style="width: 50%; background-color: #f0f8ff; border-radius: 8px;">
    <!-- Quizzes will be loaded from DB -->
  </select>

  <!-- Personality Type Selector -->
  <label for="personalitySelect" style="text-align: left; font-family: Arial, sans-serif;">Select Personality Type:</label>
  <select id="personalitySelect" style="width: 50%; background-color: #f0f8ff; border-radius: 8px;">
    <!-- Options will be dynamically loaded based on quiz -->
  </select>

  <!-- Language Selector -->
  <label for="languageSelect" style="text-align: left; font-family: Arial, sans-serif;">Select Language:</label>
  <select id="languageSelect" style="width: 50%; background-color: #f0f8ff; border-radius: 8px;">
    <option value="English">English</option>
    <option value="Chinese">Chinese</option>
  </select>

  <!-- Tone Dropdown -->
  <label for="toneDropdown" style="text-align: left; font-family: Arial, sans-serif;">Select Tone:</label>
  <select id="toneDropdown" style="width: 50%; background-color: #f0f8ff; border-radius: 8px;">
    <option value="funny">Funny</option>
    <option value="romantic">Romantic</option>
    <option value="professional">Professional</option>
  </select>

  <!-- Prompt input -->
  <label for="promptInput" style="text-align: left; font-family: Arial, sans-serif;">Prompt Text:</label>
  <textarea id="promptInput" placeholder="Enter your prompt here..." required></textarea>
  
  <!-- LLM model selection -->
  <div class="model-selection">
    <label style="text-align: left; font-family: Arial, sans-serif;">Select LLM Model:</label>
    <div class="checkboxes" id="llmCheckboxes">
      <!-- LLM checkboxes will be populated via JS -->
    </div>
  </div>

  <!-- Expected Format Selector -->
  <label for="formatSelect" style="text-align: left; font-family: Arial, sans-serif;">Expected Output Format:</label>
  <select id="formatSelect" style="width: 50%; background-color: #f0f8ff; border-radius: 8px;">
    <option value="poetry">Poetic</option>
    <option value="keywords">Keywords</option>
  </select>

  <!-- Action Buttons -->
  <div style="margin-top: 1rem;">
    <button onclick="runPrompt()">Submit Prompt</button>
  </div>

  <!-- Save Status Message -->
  <div id="saveStatus" style="margin-top: 10px; font-weight: bold;"></div>
  
</div>

<!-- Generated Output -->
<div id="outputSection" style="display:none;">
  <h2>Generated Outputs</h2>
  <div id="generatedOutput"></div>
</div>

<h2>Current Prompts</h2>
<table id="currentPromptTable">
  <thead>
    <tr>
      <th>Quiz</th><th>Personality</th><th>Type</th><th>Language</th><th>Prompt</th><th>LLM</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<h2>Previous Prompts</h2>
<table id="previousPromptTable">
  <thead>
    <tr>
      <th>Quiz</th><th>Personality</th><th>Type</th><th>Language</th><th>Prompt</th><th>LLM</th><th>Version</th><th>Action</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script src="{{ url_for('static', filename='prompt_lab/prompt_lab.js') }}"></script>

{% endblock %}